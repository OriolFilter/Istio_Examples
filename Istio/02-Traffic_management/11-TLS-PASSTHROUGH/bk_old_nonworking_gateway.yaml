#apiVersion: networking.istio.io/v1alpha3
#kind: Gateway
#metadata:
#  name: helloworld-gateway
#spec:
#  selector:
##    istio: myingressgateway
#    istio: ingressgateway
#  servers:
#    - hosts:
#        ["lb.net","*.lb.net"]
#      port:
#        name: tls-443
#        number: 443
#        protocol: HTTPS
#      tls:
#        mode: SIMPLE
#        credentialName: my-tls-cert-secret
#        minProtocolVersion: TLSV1_2
#---
#apiVersion: networking.istio.io/v1alpha3
#kind: VirtualService
#metadata:
#  name: helloworld-vs
#spec:
#  hosts:
#    - "*"
#  gateways:
#    - helloworld-gateway
#  http:
##    - name: http-vs
##      match:
##        - port: 80
##      route:
##        - destination:
##            host: helloworld.default.svc.cluster.local
##            port:
##              number: 8080
#    - name: https-vs
#      match:
#        - port: 443
#      route:
#        - destination:
#            host: helloworld.default.svc.cluster.local
#            port:
#              number: 443
##
##  tls:
##    - match:
##        - port: 443
##          sniHosts: ["lb.net"]
##      route:
##        - destination:
##            host: helloworld.default.svc.cluster.local
##            port:
##              number: 443
##---
##apiVersion: networking.istio.io/v1alpha3
##kind: DestinationRule
##metadata:
##  name: helloworld
##  namespace: default
##spec:
##    host: helloworld.default.svc.cluster.local
##    trafficPolicy:
##      portLevelSettings:
##        - port:
##            number: 8080
##          tls:
##            mode: DISABLE
##        - port:
##            number: 8443
##          tls:
##            credentialName: client-credential
##            mode: SIMPLE
##    port:
##      name: https-backend
##      number: 8443
##      protocol: HTTPS
##      tls:
##        credentialName: my-tls-cert-secret
##        mode: SIMPLE
##  tcp:
###    - match:
###        - port: 80
###      route:
###        - destination:
###            host: helloworld
###            port:
###              number: 8080
###    - match:
###        - port: 443
##      - route:
##        - destination:
##            host:  helloworld
##            port:
##              number: 8443
##
##  tls:
##    - match:
##        - port: 443
##          sniHosts:
##            - "hello.si"
###        - uri:
###            exact: /helloworld
##      route:
##        - destination:
##            host: helloworld
##            port:
##              number: 8443
###            protocol: HTTPS
###      rewrite:
###        uri: "/"